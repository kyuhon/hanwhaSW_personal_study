-- -- FK 검사 잠깐 꺼두기(TRUNCATE / INSERT / DELETE 등을 막힘 없이 하기 위해)
SET FOREIGN_KEY_CHECKS = 0;

-- 3. 관계/로그 테이블 (자식부터)
TRUNCATE TABLE notification_receiver;
TRUNCATE TABLE approval_mapping;
TRUNCATE TABLE approval;
TRUNCATE TABLE item_overdue;
TRUNCATE TABLE pay_overdue;
TRUNCATE TABLE after_service;
TRUNCATE TABLE promotion_log;
TRUNCATE TABLE issued_coupon;
TRUNCATE TABLE contract_with_item;
TRUNCATE TABLE login_history;
TRUNCATE TABLE employee_auth;
TRUNCATE TABLE emp_position_auth;

TRUNCATE TABLE customer_support;
TRUNCATE TABLE feedback;
TRUNCATE TABLE quote;
TRUNCATE TABLE notification;

-- 2. 메인 엔티티
TRUNCATE TABLE contract;
TRUNCATE TABLE promotion;
TRUNCATE TABLE coupon;
TRUNCATE TABLE survey;
TRUNCATE TABLE survey_category;
TRUNCATE TABLE item;
TRUNCATE TABLE item_category;
TRUNCATE TABLE customer;
TRUNCATE TABLE employee;

-- 1. 마스터/코드성 테이블
TRUNCATE TABLE channel;
TRUNCATE TABLE segment;
TRUNCATE TABLE support_category;
TRUNCATE TABLE emp_position;
TRUNCATE TABLE auth_list;


INSERT INTO survey_category (id, name) VALUES
                                           (1, '만족도 설문'),
                                           (2, '확장 니즈 설문'),
                                           (3, '이탈/재계약 설문');

-- 1-2. 제품 카테고리
INSERT INTO item_category (id, name) VALUES
                                         (1, '업무용 PC'),
                                         (2, '회의실 장비'),
                                         (3, '오피스 가구'),
                                         (4, '사무기기'),
                                         (5, '네트워크 장비');

-- 1-3. 권한 목록
INSERT INTO auth_list (id, auth, description) VALUES
                                                  (1, 'DASHBOARD_READ', '대시보드 조회'),
                                                  (2, 'CUSTOMER_READ', '고객 목록 조회'),
                                                  (3, 'CUSTOMER_WRITE', '고객 등록/수정'),
                                                  (4, 'CUSTOMER_DELETE', '고객 삭제'),
                                                  (5, 'CS_READ', '고객 응대 조회'),
                                                  (6, 'CS_PROCESS', '고객 응대 처리'),
                                                  (7, 'CUSTOMER_ANALYSIS_READ', '고객 분석 조회'),
                                                  (8, 'OVERDUE_READ', '연체 관리 조회'),
                                                  (9, 'OVERDUE_PROCESS', '독촉 처리'),
                                                  (10, 'QUOTE_READ', '견적 조회'),
                                                  (11, 'QUOTE_WRITE', '견적 생성/수정'),
                                                  (12, 'CONTRACT_READ', '계약 조회'),
                                                  (13, 'CONTRACT_WRITE', '계약 생성/수정'),
                                                  (14, 'CONTRACT_APPROVE', '계약 승인/반려'),
                                                  (15, 'CAMPAIGN_READ', '캠페인 조회'),
                                                  (16, 'CAMPAIGN_MANAGE', '캠페인 생성/수정/삭제'),
                                                  (17, 'ASSET_READ', '자산 조회'),
                                                  (18, 'ASSET_WRITE', '자산 등록/수정'),
                                                  (19, 'ASSET_DELETE', '자산 삭제'),
                                                  (20, 'AS_READ', 'AS/정기점검 조회'),
                                                  (21, 'AS_SCHEDULE', 'AS 일정 관리'),
                                                  (22, 'AS_APPROVE', 'AS 완료 승인'),
                                                  (23, 'APPROVAL_READ', '결재 조회'),
                                                  (24, 'APPROVAL_PROCESS', '결재 승인/반려'),
                                                  (25, 'ADMIN_READ', '관리자 메뉴 조회'),
                                                  (26, 'ADMIN_MANAGE', '전체 관리자 기능');

-- 1-4. 직책 (emp_position)
INSERT INTO emp_position (id, position_name, description) VALUES
                                                              (1, 'CEO',          '대표'),
                                                              (2, '고객관리 팀장', 'CRM 및 고객 관리 총괄'),
                                                              (3, '영업관리 팀장', '영업/계약 성과 및 파이프라인 관리'),
                                                              (4, '제품관리 팀장', '자산/제품 구성 및 상품 기획 관리'),
                                                              (5, '팀원',          '실무 담당자');

-- 1-5. 고객 응대(문의/피드백) 카테고리 (support_category)
-- type : Q = 문의, F = 피드백
INSERT INTO support_category (id, name, type) VALUES
    (1,  '가격 문의',       'Q'),
    (2,  '제품 문의',       'Q'),
    (3,  '계약 문의',       'Q'),
    (4,  '기술 지원',       'Q'),
    (5,  '서비스 만족',     'F'),
    (6,  '제품 불량',       'F'),
    (7,  '제품 품질',       'F'),
    (8,  'AS 지연',         'F'),
    (9,  '직원 응대',       'F'),
    (10, '서비스 불만',     'F');

-- 1-6. 세그먼트
INSERT INTO segment
(id, name, content, total_charge, segment_period, is_contracted, overdued)
VALUES
    (1, '잠재 고객',
     '견적서 발급만 했거나 견적 문의만 한 단계',
     NULL, NULL, FALSE, NULL
    ),
    (2, '신규 고객',
     '이전에 계약 이력이 없고 계약 후 3개월 이내인 고객',
     NULL, 3, TRUE, 0
    ),
    (3, '일반 고객',
     '계약 후 3개월이 지났으며 특이 사항이 없는 유지 고객',
     NULL, 12, TRUE, 0
    ),
    (4, '이탈 위험 고객',
     '만료 1~3개월 전 또는 해지 요청 고객 / 연체 3개월 미만 또는 잦은 불만 제기 / 만료 고객',
     NULL, NULL, TRUE, 1
    ),
    (5, 'VIP 고객',
     '3년 이상 장기 유지 또는 총 계약 금액 3억 원 이상',
     300000000, 36, TRUE, 0
    ),
    (6, '블랙리스트 고객',
     '연체 3개월 이상 욕설/비방 고의적 파손/미반납',
     NULL, NULL, FALSE, 3
    ),
    (7, '확장 의사 고객 (기회 고객)',
     '업셀링 대상 / 결합 상품 / 재계약 완료 후 3개월 이내',
     NULL, 3, TRUE, 0
    );

-- 1-7. 채널
INSERT INTO channel (id, name) VALUES
                                   (1, '전화'),
                                   (2, '이메일'),
                                   (3, '웹(채팅, 게시판)'),
                                   (4, 'SNS'),
                                   (5, '방문'),
                                   (6, '기타');

-- ----------------------------------------------------------
-- 2. 메인 엔티티 (FK 참조하는 핵심 테이블)
-- ----------------------------------------------------------

-- 2-1. 사원 (employee)
INSERT INTO employee
(id, emp_id, pwd, phone, email, addr, birthday, gender, status, dept, hire_date, resign_date, position_id)
VALUES
-- 관리자
(1, 'admin',     '$2a$10$eAyK1e.8MWHZeE7A/pJBhOf/.zP5soq3MeeI2NRcKPnRtLtnGcKyu', '010-7700-0000', 'admin@rb.com',
 '서울 강남구 테헤란로 100',  '1985-01-01 00:00:00', 'M', 'A', '경영지원팀', '2019-01-01 09:00:00', NULL, 1),

-- 일반 사원 (rental 계정)
(2, 'rental001', '$2a$10$7n13f3tRVMnxM8ghB2SbQ.TfRSfSYwhXV9IGR5ATkzk7PfpC5mhTq',     '010-7700-0001', 'rental001@rb.com',
 '서울 중구 충무로 30',       '1991-02-15 00:00:00', 'F', 'A', '고객관리팀', '2021-03-01 09:00:00', NULL, 2),
(3, 'rental002', '$2a$10$8MVTqOQOXl0DA1ag8jdAwOnjGsQZR31MzUzRkurEtIYa.rHMuWCxG',     '010-7700-0002', 'rental002@rb.com',
 '경기 성남시 판교로 50',     '1992-03-20 00:00:00', 'M', 'A', '영업1팀',    '2021-07-01 09:00:00', NULL, 3),
(4, 'rental003', '$2a$10$pOcKz7Q/QGNEtjutUc7vAewaWDN3vf2hN6MlmJl5wv0TQHY5PGhOS',     '010-7700-0003', 'rental003@rb.com',
 '부산 해운대구 센텀로 77',   '1989-04-05 00:00:00', 'F', 'A', '제품관리팀', '2019-09-01 09:00:00', NULL, 4),
(5, 'rental004', '$2a$10$ZBmA9xPS7TKXZEZb2tSCxuejfA216ke5qONFF3nxMb3yAhx9MoU/G',     '010-7700-0004', 'rental004@rb.com',
 '서울 마포구 성암로 20',     '1994-05-12 00:00:00', 'F', 'A', 'CS팀',      '2022-06-01 09:00:00', NULL, 5),
(6, 'rental005', '$2a$10$30M2A4sjpII77/06muIVHuyQ6MTdboNRsOvZ0fwDbvZ/wfaEiQ11i',     '010-7700-0005', 'rental005@rb.com',
 '서울 강남구 논현로 11',     '1995-06-18 00:00:00', 'M', 'A', 'CS팀',      '2023-01-01 09:00:00', NULL, 5),
(7, 'rental006', '$2a$10$2INnkKYhq6wrsZeiySxXbeY42WslLKSPl.BGScyi6mTUss3Vsshma',     '010-7700-0006', 'rental006@rb.com',
 '경기 수원시 영통로 33',     '1990-07-07 00:00:00', 'M', 'A', '영업1팀',    '2023-03-01 09:00:00', NULL, 5),
(8, 'rental007', '$2a$10$eOD43P5w90YEX0Pn7bKy5eI61BvE8xhzIt8l0m6SGgrtOgrRTO3O.',     '010-7700-0007', 'rental007@rb.com',
 '부산 수영구 광안로 88',     '1991-08-08 00:00:00', 'F', 'A', '영업2팀',    '2023-03-15 09:00:00', NULL, 5),
(9, 'rental008', '$2a$10$2LnBPOXaSoXRqyJdmF/y/eEbKk4uttEDolVZTrIqreRS.PUYeuh5C',     '010-7700-0008', 'rental008@rb.com',
 '대구 수성구 동대구로 55',   '1988-09-09 00:00:00', 'M', 'A', '운영팀',     '2018-03-01 09:00:00', NULL, 5),
(10,'rental009', '$2a$10$Kws107BrLajFjrOEunMgku536iw.nv7YaP0G.negtvZEY6bj75DSO',     '010-7700-0009', 'rental009@rb.com',
 '인천 송도국제도시 123',     '1993-10-10 00:00:00', 'F', 'A', '데이터팀',   '2023-07-01 09:00:00', NULL, 5);

-- 2-2. 고객 (customer) : dept = 담당자 부서/직책
INSERT INTO customer
(id, name, in_charge, dept, call_num, phone, email, business_num, addr,
 last_transaction, first_contract_date, memo, star, channel_id, segment_id)
VALUES
    (1, '㈜글로벌텍',       '정수현',  '구매팀 / 부장',          '02-6000-0001', '010-6000-0001', 'globaltech@b2b.com',   '201-81-00001', '서울 강남구 테헤란로 231',       NULL,                   NULL,                     '잠재 고객 - 가격 문의만 진행',      NULL, 1, 1),
    (2, '㈜스마트오피스',   '최지혜',  'IT운영팀 / 대리',        '02-6000-0002', '010-6000-0002', 'smartoffice@b2b.com',  '202-81-00002', '서울 중구 을지로 45',            '2025-11-05 15:00:00',  '2025-10-25 09:00:00',    '신규 고객 - 제품 도입 초기',        4,    2, 2),
    (3, '비즈니스파트너스', '강준영',  '전략기획팀 / 팀장',      '02-6000-0003', '010-6000-0003', 'bizpartner@b2b.com',   '203-81-00003', '경기 성남시 판교역로 152',      '2025-09-01 10:00:00',  '2024-05-01 09:00:00',    '일반 고객 - 계약 1년 경과',        3,    3, 3),
    (4, '㈜테크노베이션',   '송민아',  '개발팀 / 과장',          '02-6000-0004', '010-6000-0004', 'technovation@b2b.com', '204-81-00004', '부산 해운대구 센텀중앙로 90',    '2025-06-01 09:00:00',  '2023-03-01 09:00:00',    '이탈 위험 - 기술 지원 이슈',       2,    1, 4),
    (5, '㈜미래산업',       '김철수',  '운영팀 / 과장',          '02-6000-0005', '010-6000-0005', 'futureind@b2b.com',    '205-81-00005', '서울 마포구 월드컵북로 19',      '2025-09-10 10:00:00',  '2020-09-01 09:00:00',    'VIP - 서비스 만족도 높음',         5,    2, 5),
    (6, '㈜스타트업코리아', '이민지',  '서비스기획팀 / 대리',    '02-6000-0006', '010-6000-0006', 'startupkr@b2b.com',    '206-81-00006', '서울 강남구 테헤란로 25',        '2023-10-01 10:00:00',  '2021-09-01 09:00:00',    '블랙리스트 - 제품 불량 관련 분쟁', 1,    2, 6),
    (7, '비즈카페',         '박준호',  '운영팀 / 팀장',          '02-6000-0007', '010-6000-0007', 'bizcafe@b2b.com',      '207-81-00007', '경기 성남시 분당구 판교역로',    '2025-10-15 10:00:00',  '2024-08-01 09:00:00',    '확장 의사 - 제품 품질 만족',       4,    3, 7),
    (8, '테크솔루션',       '강민호',  '기술지원팀 / 과장',      '02-6000-0008', '010-6000-0008', 'techsolution@b2b.com', '208-81-00008', '부산 해운대구 우동 123',          '2025-08-15 10:30:00',  '2021-03-01 09:00:00',    'VIP - AS 지원 중요 고객',         5,    1, 5),
    (9, '㈜한울시스템',     '오세진',  '구매팀 / 부장',          '02-6000-0009', '010-6000-0009', 'hanulsys@b2b.com',     '209-81-00009', '대구 수성구 달구벌대로 123',      '2025-03-10 10:00:00',  '2022-11-01 09:00:00',    '이탈 위험 - 재계약 협상 중',       2,    2, 4),
    (10,'㈜테라네트웍스',   '조유정',  '네트워크팀 / 대리',      '02-6000-0010', '010-6000-0010', 'terranet@b2b.com',     '210-81-00010', '인천 연수구 송도과학로 55',      '2025-10-01 09:30:00',  '2025-08-01 09:00:00',    '신규 고객 - 확장 가능성 높음',     4,    3, 2);

-- 2-3. 제품 (item)
-- S: 렌탈중, P: 대여가능, R: 정검, O: 연체
INSERT INTO item
(id, name, serial_num, monthly_price, status, last_inspect_date, sales, repair_cost, category_id)
VALUES
    (1, '업무용 미니 PC', 'PC-0001', 150000, 'S', '2025-01-01 00:00:00', 450000, 10000, 1),
    (2, '고성능 워크스테이션', 'PC-0002', 280000, 'S', '2025-01-10 00:00:00', 180000, 20000, 1),
    (3, '회의실 4K 디스플레이', 'MEET-0001', 350000, 'S', '2024-12-01 00:00:00', 220000, 0, 2),
    (4, '원격 화상회의 올인원 패키지', 'MEET-0002', 550000, 'P', '2025-01-05 00:00:00', 150000, 80000, 2),
    (5, '전동 높이조절 데스크', 'FURN-0001', 90000, 'P', '2024-11-01 00:00:00', 520000, 0, 3),
    (6, '인체공학 메쉬 의자', 'FURN-0002', 65000, 'P', '2024-12-15 00:00:00', 400000, 15000, 3),
    (7, '고속 문서 스캐너', 'OFF-0001', 70000, 'S', '2025-01-18 00:00:00', 120000, 5000, 4),
    (8, '네트워크 복합기', 'OFF-0002', 160000, 'S', '2025-01-20 00:00:00', 160000, 0, 4),
    (9, 'VPN 보안 게이트웨이', 'NET-0001', 210000, 'P', '2025-01-11 00:00:00', 90000, 0, 5),
    (10, 'L3 네트워크 스위치', 'NET-0002', 260000, 'P', '2025-01-02 00:00:00', 60000, 0, 5);

-- 2-4. 설문 (survey)
INSERT INTO survey
(id, name, link, status, start_date, end_date, ai_response, category_id)
VALUES
    (1, '2025 Q1 고객 만족도 설문', 'https://survey.example.com/1', 'OPEN',
     '2025-01-01 00:00:00', '2025-01-31 23:59:59', NULL, 1),
    (2, '확장 니즈 조사',           'https://survey.example.com/2', 'OPEN',
     '2025-01-10 00:00:00', '2025-02-10 23:59:59', NULL, 2),
    (3, '이탈/재계약 사유 조사',    'https://survey.example.com/3', 'CLOSED',
     '2024-12-01 00:00:00', '2024-12-31 23:59:59', '가격·기능 관련 이탈사유 다수', 3);

-- 2-5. 쿠폰 (coupon)  - type: A=금액, R=비율  → 여기서는 전부 비율 R
INSERT INTO coupon
(id, name, rate, content, type, start_date, end_date, date_period, min_fee, max_num, segment_id)
VALUES
    (1, '신규 고객 10% 할인',     10, '신규 고객 첫 달 요금 10% 할인',           'R', '2025-01-01 00:00:00', '2025-12-31 23:59:59', 30, 1000000, 100, 2),
    (2, '일반 고객 업그레이드',   15, '일반 고객 상위 상품 업그레이드 할인',     'R', '2025-01-01 00:00:00', '2025-06-30 23:59:59', 30, 2000000, 50,  3),
    (3, '이탈 위험 재계약 20%',   20, '이탈 위험 고객 대상 재계약 할인',         'R', '2025-01-01 00:00:00', '2025-03-31 23:59:59', 30, 1000000, 30,  4),
    (4, 'VIP 감사 쿠폰',          25, 'VIP 고객 한정 특별 할인',                 'R', '2025-01-01 00:00:00', '2025-12-31 23:59:59', 60, 0,       20,  5),
    (5, '확장 의사 패키지 할인',  15, '업셀링/결합 상품 패키지 할인',            'R', '2025-01-15 00:00:00', '2025-06-30 23:59:59', 30, 2000000, 40,  7);

-- 2-6. 프로모션 (promotion)
-- status: P=시작전 / A=진행중 / H=일시정지 / C=기간만료
-- type: A=자동형 / M=일반형

INSERT INTO promotion
(id, name, start_date, end_date, status, type, trigger_val, content, segment_id)
VALUES
-- [자동형]
(1, '신규 고객 웰컴 프로모션', '2025-01-01 00:00:00', '2025-03-31 23:59:59', 'A', 'A', '신규 계약 발생', '첫 달 요금 10% 할인', 2),
(2, '이탈 방지 자동 프로모션', '2025-01-15 00:00:00', '2025-04-30 23:59:59', 'A', 'A', '만료 3개월 전', '재계약 시 20% 할인', 4),
(3, 'VIP 자동 리워드', '2025-02-01 00:00:00', '2025-12-31 23:59:59', 'A', 'A', 'VIP 등급', '추가 장비 1개월 무료 제공', 5),
(4, '확장 고객 자동 업셀링', '2025-01-20 00:00:00', '2025-06-30 23:59:59', 'H', 'A', '업셀 대상', '업그레이드 월 요금 15% 할인', 7),

-- [일반형]
(5, '일반 고객 유지 프로모션', '2025-03-01 00:00:00', '2025-06-30 23:59:59', 'P', 'M', NULL, '장비 점검 무상 쿠폰 제공', 3),
(6, 'CS 이슈 해결 보상 쿠폰', '2025-03-20 00:00:00', '2025-04-30 23:59:59', 'A', 'M', NULL, '다음 계약 시 5% 할인', 4),
(7, '확장 마케팅 이벤트', '2025-02-10 00:00:00', '2025-02-28 23:59:59', 'C', 'M', NULL, '장비 5% 할인 이벤트 기간 종료', 2),
(8, 'AS 무상 지원 프로모션', '2025-06-01 00:00:00', '2025-06-30 23:59:59', 'A', 'M', NULL, '1회 무상 AS 제공', 3),
(9, 'VIP 리텐션 프로모션', '2025-07-01 00:00:00', '2025-12-31 23:59:59', 'P', 'M', NULL, '장비 업그레이드 무료 제공', 5),
(10, '파트너 리워드 이벤트', '2025-01-05 00:00:00', '2025-02-10 23:59:59', 'C', 'M', NULL, '재계약 고객 대상 혜택 종료됨', 3);

-- 2-7. 계약 (contract)
-- status: P=진행중, C=만료됨
-- pay_method: B: 계좌이체 (Bank Transfer), A:자동이체 (Auto Payment)

INSERT INTO contract
(id, name, start_date, contract_period, status, monthly_payment, total_amount, pay_method, special_content, cum_id)
VALUES
-- 진행중
(1,  '글로벌텍 회의실 장비 렌탈',       '2024-05-01 00:00:00', 12, 'P', 1200000, 14400000,  'A',  '파일럿 성격',           1),
(2,  '스마트오피스 오피스 풀패키지',    '2025-10-25 00:00:00', 24, 'P', 3000000, 72000000,  'B', '신규 고객 할인 10%',    2),
(3,  '비즈니스파트너스 장기 계약',      '2024-05-01 00:00:00', 36, 'P', 1800000, 64800000,  'A', '데스크·의자 포함',     3),
(4,  '테크노베이션 서버·네트워크 계약', '2023-03-01 00:00:00', 36, 'P', 2500000, 90000000,  'B', '만료 2개월 전 재협상', 4),
(5,  '미래산업 VIP 패키지',             '2020-09-01 00:00:00', 60, 'P', 3500000, 210000000, 'A', 'VIP 특별 조건',        5),
-- 만료됨
(6,  '스타트업코리아 테스트 계약',       '2021-09-01 00:00:00', 24, 'C', 1000000, 24000000,  'A', '연체·분쟁 발생',       6),
(7,  '비즈카페 장비 증설 계약',         '2024-08-01 00:00:00', 24, 'C', 1600000, 38400000,  'B', '향후 업셀 대상',       7),
(8,  '테크솔루션 기술지원 패키지',       '2021-03-01 00:00:00', 48, 'C', 2200000, 105600000,'B', 'AS SLA 포함',         8),
(9,  '한울시스템 데이터센터 계약',       '2022-11-01 00:00:00', 36, 'C', 2100000, 75600000,  'A', '재계약 협의 중',       9),
(10, '테라네트웍스 네트워크 패키지',     '2025-08-01 00:00:00', 12, 'C', 1400000, 16800000,  'B', '신규·확장 혼합',       10);

-- 2-8. 견적/상담 기록 (quote)
-- 예약 (Reserved) R, 완료 (Completed) C
INSERT INTO quote
(id, status, counseling_date, counselor, summary, content, processing_time, channel_id, cum_id)
VALUES
    (1, 'R', '2025-01-10 10:00:00', '박영희', '업무용 PC 50대 견적',       '글로벌텍 PC 패키지 견적',               45, 1, 1),
    (2, 'R', '2025-01-15 11:00:00', '박영희', '오피스 풀패키지 제안',     '스마트오피스 풀패키지 신규 제안',       60, 2, 2),
    (3, 'R', '2025-01-20 15:00:00', '강준영', '회의실+가구 패키지',       '비즈니스파트너스 회의실 패키지 제안',   30, 3, 3),
    (4, 'R', '2025-01-22 09:30:00', '강준영', '서버·네트워크 업그레이드', '테크노베이션 업그레이드 제안',          50, 3, 4),
    (5, 'C', '2025-01-25 14:00:00', '최수진', 'VIP 패키지 리뉴얼',        '미래산업 VIP 조건 재협상',              90, 2, 5),
    (6, 'C', '2025-01-27 13:00:00', '최수진', '테스트 계약 제안',         '스타트업코리아 테스트 장비 제안',        20, 4, 6),
    (7, 'R', '2025-01-28 10:00:00', '박영희', '카페 장비 증설',           '비즈카페 장비 증설 견적',               25, 5, 7),
    (8, 'R', '2025-01-29 11:30:00', '강준영', '기술지원 패키지',          '테크솔루션 기술지원 패키지 제안',        40, 2, 8),
    (9, 'R', '2025-01-30 15:00:00', '최수진', '데이터센터 증설',          '한울시스템 데이터센터 증설 견적',        70, 1, 9),
    (10,'R', '2025-01-31 09:00:00', '박영희', '네트워크 패키지',          '테라네트웍스 네트워크 패키지 제안',      35, 3, 10);


-- 2-9. 피드백 (feedback)  star: 1~5
INSERT INTO feedback
(id, title, content, star, create_date, action, cum_id, category_id, emp_id, channel_id)
VALUES
    (1, '서비스 전반 만족',     '응대 속도와 안내가 만족스럽습니다.',              5, '2025-01-10 10:00:00', '리포트 공유',         5, 5, 2, 2),
    (2, '제품 불량 발생',       '회의실 디스플레이 불량이 자주 발생합니다.',         2, '2025-01-12 11:30:00', '원인 분석 진행',       6, 6, 4, 3),
    (3, '제품 품질 우수',       '업무용 PC 성능이 매우 좋습니다.',                 5, '2025-01-13 09:00:00', '마케팅 공유',         7, 7, 7, 1),
    (4, 'AS 지원 만족',         'AS 기사님이 친절하고 빠르게 대응했습니다.',        5, '2025-01-14 14:00:00', '칭찬 메일 전달',       8, 8, 5, 1),
    (5, '서비스 품질 개선 요청', '야간 지원 시간이 짧아 아쉽습니다.',               3, '2025-01-15 15:00:00', '정책 검토',           4, 5, 2, 2),
    (6, 'AS 지연 불만',         '부품 수급 문제로 AS가 지연되었습니다.',           1, '2025-01-16 16:00:00', '공급망 점검',         9, 8, 5, 1),
    (7, '제품 품질 안정적',     '네트워크 장비가 안정적으로 동작합니다.',           4, '2025-01-17 10:30:00', '사례 공유',           8, 7, 3, 2),
    (8, '제품 불량 재발',       '복합기에서 종이 걸림이 반복됩니다.',              2, '2025-01-18 11:00:00', '교체 여부 검토',       6, 6, 4, 1),
    (9, '서비스 만족도 높음',   'CS 담당자 응대가 매우 친절합니다.',               5, '2025-01-19 13:00:00', '보상/리워드 검토',     10,5, 5, 4),
    (10,'AS 지원 개선 요청',    '원격 지원 옵션이 있으면 좋겠습니다.',             4, '2025-01-20 09:30:00', '기능 개선 검토',       3, 8, 6, 3);

-- 2-10. 고객 문의
-- status: P=처리중, C=해결완료
INSERT INTO customer_support
(id, title, content, status, create_date, action, cum_id, emp_id, category_id, channel_id)
VALUES
    (1, '가격 정책 문의',      '장기 계약 시 추가 할인 가능한가요?',             'P', '2025-01-10 09:00:00', '견적 재산정 중',       1, 7, 1, 1),
    (2, '제품 기능 문의',      '회의실 장비의 동시 접속 인원이 궁금합니다.',     'P', '2025-01-11 10:00:00', '기능 설명 자료 발송', 2, 5, 2, 3),
    (3, '계약 조건 변경',      '계약 기간을 24개월에서 36개월로 변경 원합니다.', 'P', '2025-01-12 11:00:00', '계약 변경 검토',      3, 3, 3, 2),
    (4, 'VPN 접속 장애',       '간헐적으로 VPN 접속이 끊깁니다.',                'C', '2025-01-13 14:00:00', '원격 점검 완료',      4, 6, 4, 1),
    (5, '가격 비교 문의',      '경쟁사 대비 가격 차이가 궁금합니다.',             'C', '2025-01-14 15:00:00', '비교 견적 제공',      5, 7, 1, 2),
    (6, '제품 사양 문의',      'GPU 옵션 추가가 가능한가요?',                     'P', '2025-01-15 16:00:00', '영업팀 답변 준비',    6, 7, 2, 2),
    (7, '계약 갱신 문의',      '갱신 시 위약금 조건이 어떻게 되나요?',           'P', '2025-01-16 09:30:00', '계약서 검토 중',      9, 2, 3, 3),
    (8, '서버 장애 신고',      '야간에 서버 접속이 되지 않았습니다.',             'P', '2025-01-17 10:30:00', '모니터링 로그 분석',  8, 5, 4, 1),
    (9, '계약 해지 문의',      '해지 절차와 위약금이 궁금합니다.',                'C', '2025-01-18 11:30:00', '해지 안내 완료',      9, 6, 3, 2),
    (10,'기술 지원 일정 변경', 'AS 방문 일정을 조정하고 싶습니다.',               'C', '2025-01-19 13:30:00', '일정 재조정 완료',    8, 5, 4, 5);

-- 2-11. 알림 (notification)

-- type (알림 종류)
-- APPROVAL          : 결재 승인/요청 관련
-- AS_DUE            : AS 일정 도래, AS 처리
-- CONTRACT_EXPIRE   : 계약 종료/만료 도래
-- SURVEY            : 설문 요청/결과
-- PROMOTION         : 프로모션/쿠폰 발행
-- -----------------------------------------------------
-- target_type (알림 대상)
-- EMPLOYEE          : 특정 직원 또는 팀 내 담당자
-- DEPARTMENT        : 특정 부서 전체
-- ROLE              : 권한 단위 대상(관리자, 팀장 등)

INSERT INTO notification
(id, type, title, message, created_at, target_type, target_id)
VALUES
-- 결재 관련 알림 (APPROVAL)
(1, 'APPROVAL', '신규 계약 승인 완료', '스마트오피스 신규 계약이 승인되었습니다.', '2025-10-22 12:00:00', 'EMPLOYEE', 2),
(2, 'APPROVAL', '재계약 검토 요청', '테크노베이션 재계약案 검토가 필요합니다.', '2025-02-01 10:00:00', 'EMPLOYEE', 3),

-- AS 일정 관련 (AS_DUE)
(3, 'AS_DUE', 'AS 일정 안내', '테크솔루션 장비 AS가 예약되었습니다.', '2025-02-05 08:30:00', 'EMPLOYEE', 5),
(4, 'AS_DUE', '정기 점검 예정', '미래산업 정기 점검이 48시간 뒤 예정입니다.', '2025-02-27 08:00:00', 'EMPLOYEE', 4),

-- 계약 만료 관련 (CONTRACT_EXPIRE)
(5, 'CONTRACT_EXPIRE', '계약 만료 임박', '글로벌텍 계약 만료 예정일이 30일 남았습니다.', '2025-04-01 09:00:00', 'ROLE', 3),     -- 영업관리팀장
(6, 'CONTRACT_EXPIRE', '재계약 협상 필요', '한울시스템 계약 만료로 협상이 필요합니다.', '2025-02-10 09:00:00', 'EMPLOYEE', 2),

-- 설문 관련 (SURVEY)
(7, 'SURVEY', '고객 만족도 설문 요청', '2025 Q1 만족도 설문에 참여해 주세요.', '2025-01-05 09:00:00', 'CUSTOMER', 5),   -- 고객 단위 가능

-- 프로모션/쿠폰 관련 (PROMOTION)
(8, 'PROMOTION', 'VIP 고객 감사 프로모션', '미래산업 VIP 프로모션이 시작되었습니다.', '2025-02-01 09:00:00', 'CUSTOMER', 5),
(9, 'PROMOTION', '신규 고객 웰컴 쿠폰 지급', '첫 달 요금 할인 쿠폰이 발급되었습니다.', '2025-01-05 10:00:00', 'CUSTOMER', 2),

-- 위험 신호 (CUSTOMER STATUS + ALERT)
(10,'CONTRACT_EXPIRE', '이탈 위험 고객 알림', '한울시스템 이탈 위험 상태로 분류되었습니다.','2025-02-10 09:00:00', 'EMPLOYEE', 2);

-- ----------------------------------------------------------
-- 3. 관계 / 로그 테이블
-- ----------------------------------------------------------

-- 3-1. 직책-권한 매핑 (emp_position_auth)
INSERT INTO emp_position_auth (position_id, auth_id) SELECT 1 AS position_id, id FROM auth_list;
INSERT INTO emp_position_auth (position_id, auth_id) VALUES
                                                         (2, 1), (2, 2), (2, 3), (2, 5), (2, 6),
                                                         (2, 7), (2, 8), (2, 9), (2, 10), (2, 11),
                                                         (2, 12), (2, 23);


INSERT INTO emp_position_auth (position_id, auth_id) VALUES
                                                         (3, 1), (3, 2), (3, 10), (3, 11),
                                                         (3, 12), (3, 13), (3, 14),
                                                         (3, 15), (3, 16),
                                                         (3, 23);


INSERT INTO emp_position_auth (position_id, auth_id) VALUES
                                                         (4, 1), (4, 8),
                                                         (4, 17), (4, 18), (4, 19),
                                                         (4, 20), (4, 21), (4, 22);


INSERT INTO emp_position_auth (position_id, auth_id) VALUES
                                                         (5, 1), (5, 2), (5, 5), (5, 10),
                                                         (5, 12), (5, 15), (5, 17),
                                                         (5, 20), (5, 23);


-- 3-2. 사원별 권한 (employee_auth)
INSERT INTO employee_auth (id, auth_id, emp_id) VALUES
																								   			 (1, 2, 16),  -- E002: 고객관리 팀장 → 캠페인 관리 권한 추가
																								   			 (2, 3, 24),  -- E003: 영업관리 팀장 → 결재 처리 권한 추가
																								   			 (3, 4, 9),  -- E004: 자산관리 팀장 → 연체 독촉 처리 권한 추가
																								   			 (4, 5, 6);  -- E005: 팀원 → 고객 응대 처리 권한 추가

-- 3-3. 로그인 이력 (login_history)
INSERT INTO login_history
(id, login_success_date, login_is_succeed, login_ip, emp_id)
VALUES
    (1, '2025-02-01 09:00:00', 'Y', '10.0.0.1', 1),
    (2, '2025-02-01 09:05:00', 'Y', '10.0.0.2', 2),
    (3, '2025-02-01 09:10:00', 'Y', '10.0.0.3', 3),
    (4, '2025-02-01 09:15:00', 'N', '10.0.0.4', 4),
    (5, '2025-02-01 09:20:00', 'Y', '10.0.0.4', 4),
    (6, '2025-02-01 09:25:00', 'Y', '10.0.0.5', 5),
    (7, '2025-02-01 09:30:00', 'Y', '10.0.0.6', 6),
    (8, '2025-02-01 09:35:00', 'Y', '10.0.0.7', 7),
    (9, '2025-02-01 09:40:00', 'N', '10.0.0.8', 8),
    (10,'2025-02-01 09:45:00', 'Y', '10.0.0.8', 8);

-- 3-4. 계약-제품 매핑 (contract_with_item)
INSERT INTO contract_with_item (id, contract_id, item_id) VALUES
                                                              (1, 1, 3),
                                                              (2, 1, 4),
                                                              (3, 2, 1),
                                                              (4, 2, 2),
                                                              (5, 3, 5),
                                                              (6, 3, 6),
                                                              (7, 4, 9),
                                                              (8, 5, 1),
                                                              (9, 8, 7),
                                                              (10,10,10);

-- 3-5. 발급 쿠폰 (issued_coupon)
INSERT INTO issued_coupon
(id, issued_date, is_used, used_date, end_date, coupon_id, cum_id)
VALUES
    (1, '2025-01-05 10:00:00', 'Y', '2025-01-10 09:00:00', '2025-02-04 23:59:59', 1, 2),
    (2, '2025-01-06 11:00:00', 'N', NULL,                  '2025-02-05 23:59:59', 1, 10),
    (3, '2025-01-07 09:30:00', 'Y', '2025-01-20 15:00:00', '2025-02-06 23:59:59', 2, 3),
    (4, '2025-01-08 13:00:00', 'N', NULL,                  '2025-02-07 23:59:59', 2, 7),
    (5, '2025-01-09 10:00:00', 'N', NULL,                  '2025-02-08 23:59:59', 3, 4),
    (6, '2025-01-10 11:00:00', 'Y', '2025-01-25 14:00:00', '2025-02-09 23:59:59', 3, 9),
    (7, '2025-01-11 09:00:00', 'Y', '2025-01-18 09:30:00', '2025-02-10 23:59:59', 4, 5),
    (8, '2025-01-12 16:00:00', 'N', NULL,                  '2025-03-13 23:59:59', 4, 8),
    (9, '2025-01-13 10:30:00', 'N', NULL,                  '2025-02-12 23:59:59', 5, 7),
    (10,'2025-01-14 11:30:00', 'Y', '2025-01-28 16:00:00', '2025-02-13 23:59:59', 5, 1);

-- 3-6. 프로모션 참여 로그 (promotion_log)
INSERT INTO promotion_log
(id, participation_date, cum_id, promotion_id)
VALUES
    (1, '2025-02-01 10:00:00', 2, 1),
    (2, '2025-02-02 11:00:00', 10,1),
    (3, '2025-02-05 15:00:00', 4, 2),
    (4, '2025-02-06 16:00:00', 9, 2),
    (5, '2025-02-10 09:30:00', 5, 3),
    (6, '2025-02-11 14:00:00', 8, 3),
    (7, '2025-02-15 13:00:00', 7, 4),
    (8, '2025-02-16 11:00:00', 3, 5),
    (9, '2025-02-18 10:00:00', 1, 5),
    (10,'2025-02-20 09:00:00', 6, 2);

-- 3-7. AS 내역 (after_service)
-- type  : R=정기 점검(Regular), I=장애/수리(Incident)
-- status: P=예약(예정), C=완료

INSERT INTO after_service
(id, engineer, type, due_date, status, item_id, cum_id)
VALUES
    (1,  '엔지니어 김수현', 'R', '2025-02-01 10:00:00', 'C',  1,  2),
    (2,  '엔지니어 박지훈', 'R', '2025-02-05 14:00:00', 'C',  3,  3),
    (3,  '엔지니어 이지은', 'I', '2025-02-10 09:30:00', 'P',  5,  4),
    (4,  '엔지니어 최민호', 'R', '2025-02-15 11:00:00', 'P',  7,  6),
    (5,  '엔지니어 정예린', 'I', '2025-02-20 13:00:00', 'C',  8,  5),
    (6,  '엔지니어 김도윤', 'R', '2025-02-22 15:00:00', 'C',  2,  7),
    (7,  '엔지니어 오세훈', 'R', '2025-02-25 16:00:00', 'P',  9,  8),
    (8,  '엔지니어 한유진', 'I', '2025-02-27 09:00:00', 'C',  6,  9),
    (9,  '엔지니어 문지호', 'R', '2025-02-28 10:30:00', 'P', 10, 10),
    (10, '엔지니어 이나연', 'I', '2025-03-01 14:30:00', 'C',  4,  1);


-- 3-8. 납부 연체 (pay_overdue)
INSERT INTO pay_overdue
(id, paid_date, due_date, overdue_period, status, contract_id, cum_id)
VALUES
    (1, '2025-03-15 00:00:00', '2025-03-10 00:00:00', 5,  'C', 4, 4),
    (2, NULL,                  '2025-04-10 00:00:00', 20, 'P', 4, 4),
    (3, NULL,                  '2023-01-10 00:00:00', 95, 'P', 6, 6),
    (4, '2025-02-22 00:00:00', '2025-02-10 00:00:00', 12, 'C', 9, 9),
    (5, NULL,                  '2025-01-10 00:00:00', 30, 'P', 9, 9);


-- 3-9. 장비 연체 (item_overdue)
INSERT INTO item_overdue
(id, count, due_date, overdue_period, status, contract_id, cum_id)
VALUES
    (1, 2, '2025-03-01 00:00:00', 15, 'P', 4, 4),
    (2, 1, '2023-01-01 00:00:00', 90, 'P', 6, 6),
    (3, 3, '2025-02-01 00:00:00', 25, 'P', 9, 9),
    (4, 1, '2025-02-15 00:00:00', 10, 'P', 7, 7),
    (5, 1, '2025-02-20 00:00:00', 5,  'C', 2, 2);


-- 3-10. 결재 (approval)
INSERT INTO approval
(id, title, content, request_date, approval_date, status, contract_id, emp_id)
VALUES
    (1, '글로벌텍 파일럿 계약 승인',
     '글로벌텍 회의실 장비 PoC 계약 승인 요청',
     '2024-04-20 09:00:00', '2024-04-25 10:00:00', 'A', 1, 3),
    (2, '스마트오피스 신규 패키지 승인',
     '스마트오피스 오피스 패키지 신규 계약 승인 요청',
     '2025-10-20 09:00:00', '2025-10-22 11:00:00', 'A', 2, 3),
    (3, '비즈니스파트너스 장기 계약 승인',
     '비즈니스파트너스 장기 계약 승인 요청',
     '2024-04-25 09:00:00', '2024-04-28 10:30:00', 'A', 3, 3),

-- 승인 보류 케이스 → approval_date = request_date 로 처리
    (4, '테크노베이션 재계약 보류',
     '테크노베이션 만료 예정 계약 재협상',
     '2025-02-01 09:00:00', '2025-02-01 09:00:00', 'P', 4, 3),
    (5, '미래산업 VIP 조건 변경',
     '미래산업 VIP 조건 상향 조정',
     '2025-01-15 09:00:00', '2025-01-18 10:00:00', 'A', 5, 2),
    (6, '스타트업코리아 계약 중단',
     '연체 및 분쟁으로 인한 계약 중단',
     '2023-01-05 09:00:00', '2023-01-10 11:00:00', 'R', 6, 2),
    (7, '비즈카페 업셀 계약 승인',
     '비즈카페 장비 증설 계약',
     '2024-07-20 09:00:00', '2024-07-25 10:00:00', 'A', 7, 3),

    (8, '테크솔루션 기술지원 패키지 승인',
     '테크솔루션 기술지원 패키지 계약',
     '2021-02-20 09:00:00', '2021-02-25 10:00:00', 'A', 8, 4),

    (9, '한울시스템 재계약 승인',
     '한울시스템 데이터센터 재계약',
     '2025-01-10 09:00:00', '2025-01-15 10:00:00', 'A', 9, 3),

    (10,'테라네트웍스 신규 계약 승인',
     '테라네트웍스 네트워크 패키지 신규 계약',
     '2025-07-20 09:00:00', '2025-07-22 11:00:00', 'A', 10, 3);

-- 3-11. 결재자/단계 매핑 (approval_mapping)
INSERT INTO approval_mapping
(id, emp_id, approval_id, step, is_approved, reject_reason)
VALUES
    (1, 1, 1, 1, 'Y', NULL),
    (2, 3, 1, 2, 'Y', NULL),
    (3, 1, 2, 1, 'Y', NULL),
    (4, 3, 2, 2, 'Y', NULL),
    (5, 1, 4, 1, 'Y', NULL),
    (6, 2, 4, 2, 'N', '조건 재협상 필요'),
    (7, 1, 6, 1, 'Y', NULL),
    (8, 2, 6, 2, 'Y', NULL),
    (9, 1, 9, 1, 'Y', NULL),
    (10,3, 9, 2, 'Y', NULL);

-- 3-12. 알림 수신자 (notification_receiver)
INSERT INTO notification_receiver
(id, is_read, noti_id, emp_id)
VALUES
    (1, 'N', 1, 2),
    (2, 'Y', 2, 3),
    (3, 'N', 3, 2),
    (4, 'Y', 4, 5),
    (5, 'N', 5, 5),
    (6, 'Y', 6, 2),
    (7, 'N', 7, 2),
    (8, 'Y', 8, 2),
    (9, 'Y', 9, 5),
    (10,'N',10,3);

SET FOREIGN_KEY_CHECKS = 1;-- 2-8. 견적/상담 기록 (quote)
-- 예약 (Reserved) R, 완료 (Completed) C
INSERT INTO quote
(id, status, counseling_date, counselor, summary, content, processing_time, channel_id, cum_id)
VALUES
    (1, 'R', '2025-01-10 10:00:00', '박영희', '업무용 PC 50대 견적',       '글로벌텍 PC 패키지 견적',               45, 1, 1),
    (2, 'R', '2025-01-15 11:00:00', '박영희', '오피스 풀패키지 제안',     '스마트오피스 풀패키지 신규 제안',       60, 2, 2),
    (3, 'R', '2025-01-20 15:00:00', '강준영', '회의실+가구 패키지',       '비즈니스파트너스 회의실 패키지 제안',   30, 3, 3),
    (4, 'R', '2025-01-22 09:30:00', '강준영', '서버·네트워크 업그레이드', '테크노베이션 업그레이드 제안',          50, 3, 4),
    (5, 'C', '2025-01-25 14:00:00', '최수진', 'VIP 패키지 리뉴얼',        '미래산업 VIP 조건 재협상',              90, 2, 5),
    (6, 'C', '2025-01-27 13:00:00', '최수진', '테스트 계약 제안',         '스타트업코리아 테스트 장비 제안',        20, 4, 6),
    (7, 'R', '2025-01-28 10:00:00', '박영희', '카페 장비 증설',           '비즈카페 장비 증설 견적',               25, 5, 7),
    (8, 'R', '2025-01-29 11:30:00', '강준영', '기술지원 패키지',          '테크솔루션 기술지원 패키지 제안',        40, 2, 8),
    (9, 'R', '2025-01-30 15:00:00', '최수진', '데이터센터 증설',          '한울시스템 데이터센터 증설 견적',        70, 1, 9),
    (10,'R', '2025-01-31 09:00:00', '박영희', '네트워크 패키지',          '테라네트웍스 네트워크 패키지 제안',      35, 3, 10);
